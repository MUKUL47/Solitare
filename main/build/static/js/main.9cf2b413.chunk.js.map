{"version":3,"sources":["deck/deck.jsx","solitare.js","gameboard/gameboard.jsx","index.js"],"names":["Deck","props","state","refs","data","map","React","createRef","index","e","includes","this","type","helpDeckClicked","deckClicked","slice","deckIndex","setState","prev","card","onClick","ref","rank","hidden","suit","backcolor","backtext","style","cursor","zIndex","position","left","top","width","Component","Solitare","someoneWon","ranks","board","deck","deckExposed","aces","finishedDeck","cardConsidered","cardsConsidered","black_cards","red_cards","ranking","ace","jack","queen","king","i","j","getRandomCardFromDeck","push","newCard","pop","cards","exception","column","length","console","error","finishIndex","boardIndex","spliceIndex","isDeckExposed","splice","reverse","v","ranksIdx","Math","floor","random","typeIdx","id","Gameboard","solitare","initialize","selectedDeckInfo","gameboardRef","deckInHandRef","reset","oldDeck","appendNewCardsToBoard","exposeTopDeck","removeCardsFromDeck","removeOldCardsFromBoard","deckToDeckExpose","current","addEventListener","clientY","clientX","resetDeck","appendToFinishedDeck","className","onEmptyDeckBoard","bind","deckIdx","lastDeckClicked","deckTarget","onDeckClick","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9cf2b413.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nexport class Deck extends Component {\n  /**\n   * 1) render a deck in a domino pattern based on hidden property\n   * 2) on drag event to parent, verify if card(s) are/is draggable\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      refs: props?.data?.map(() => React.createRef()),\n      index: -1,\n    };\n  }\n  deckClicked(index, e) {\n    //, \"DECK_EXP_OSED\"\n    if ([\"DECK\"].includes(this.props.type)) {\n      this.helpDeckClicked(index);\n      return;\n    }\n    this.props.deckClicked(\n      this.props.data.slice(index),\n      index,\n      this.props.type,\n      e,\n      this.props.deckIndex\n    );\n  }\n\n  helpDeckClicked(index) {\n    this.props.deckClicked(this.props.data[index], index, this.props.type);\n    this.setState({ index });\n    if (index === this.state.index) {\n      this.setState({ index: -1 });\n      return;\n    }\n  }\n  componentDidUpdate(prev) {\n    const prevCards = prev?.data;\n    const nextCards = this.props?.data;\n    if (prevCards !== nextCards) {\n      this.setState({\n        refs: this.props?.data?.map(() => React.createRef()),\n        index: -1,\n      });\n    }\n    // return true;\n  }\n  render() {\n    const Data = this.props.data.map((card, index) => {\n      return (\n        <card-t\n          onClick={(e) => this.deckClicked(index, e)}\n          key={index}\n          ref={this.state.refs[index]}\n          rank={card.hidden ? 0 : card.rank}\n          suit={card.hidden ? 0 : card.type}\n          backcolor=\"blue\"\n          backtext=\" \"\n          style={{\n            cursor: \"pointer\",\n            zIndex: index,\n            position: \"absolute\",\n            left: 0,\n            top: index * (this?.props?.zIndex || 35),\n            width: \"100%\",\n          }}></card-t>\n      );\n    });\n    return Data;\n  }\n}\n","export class Solitare {\n  ranks = [\"ace\", 2, 3, 4, 5, 6, 7, 8, 9, 10, \"jack\", \"queen\", \"king\"];\n  type = [\"spades\", \"clubs\", \"diamonds\", \"hearts\"];\n  board = []; // [ ]\n  deck = [];\n  deckExposed = [];\n  aces = [];\n  finishedDeck = [[], [], [], []];\n  //\n  cardConsidered = [];\n  cardsConsidered = 1;\n  black_cards = [\"spades\", \"clubs\"];\n  red_cards = [\"diamonds\", \"hearts\"];\n  ranking = {\n    ace: 1,\n    2: 2,\n    3: 3,\n    4: 4,\n    5: 5,\n    6: 6,\n    7: 7,\n    8: 8,\n    9: 9,\n    10: 10,\n    jack: 11,\n    queen: 12,\n    king: 13,\n  };\n  constructor(someoneWon) {\n    this.someoneWon = someoneWon;\n    return this;\n  }\n\n  initialize() {\n    for (let i = 0; i <= 6; i++) {\n      for (let j = 0; j <= i; j++) {\n        let card = this.getRandomCardFromDeck();\n        card[\"hidden\"] = i !== j;\n        if (!this.board[i]) {\n          this.board[i] = [card];\n        } else {\n          this.board[i].push(card);\n        }\n      }\n    }\n    let card = this.getRandomCardFromDeck();\n    while (card) {\n      card[\"hidden\"] = true;\n      this.deck.push(card);\n      card = this.getRandomCardFromDeck();\n    }\n    return this;\n  }\n\n  deckToDeckExpose(deck) {\n    const newCard = deck ? deck : { ...this.deck.pop(), hidden: false };\n    this.deckExposed = [...this.deckExposed, newCard];\n    return this;\n  }\n\n  appendNewCardsToBoard(index, cards, exception) {\n    const column = this.board[index];\n    //first card king\n    if (!exception) {\n      if (column.length === 0 && cards[0].rank !== \"king\") return false;\n      //red-black vice-versa\n      if (column[column.length - 1]?.type === cards?.[0].type) return false;\n      //ranking\n      if (\n        column.length > 0 &&\n        this.ranking?.[column[column.length - 1].rank] - 1 !==\n          this.ranking?.[cards?.[0]?.rank]\n      )\n        return false;\n    }\n    this.board[index] = [...this.board[index], ...cards];\n    return this;\n  }\n\n  exposeTopDeck(index) {\n    try {\n      this.board[index][this.board[index].length - 1].hidden = false;\n      return this;\n    } catch (e) {\n      console.error(e);\n      return this;\n    }\n  }\n\n  appendToFinishedDeck(card, finishIndex) {\n    //rank, type\n    let deck = this.finishedDeck[finishIndex];\n    if (deck.length === 0 && card.rank !== \"ace\") return false;\n    if (deck.length > 0) {\n      if (\n        deck[0].type !== card.type ||\n        this.ranking[deck[deck.length - 1].rank] + 1 !== this.ranking[card.rank]\n      )\n        return false;\n    }\n    this.finishedDeck[finishIndex] = [...this.finishedDeck[finishIndex], card];\n    return this;\n  }\n\n  removeOldCardsFromBoard(boardIndex, spliceIndex, isDeckExposed) {\n    this.board[boardIndex].splice(spliceIndex);\n    return this;\n  }\n  removeCardsFromDeck() {\n    this.deckExposed.pop();\n    return this;\n  }\n\n  resetDeck() {\n    this.deck = this.deckExposed.reverse().map((v) => {\n      return { ...v, hidden: true };\n    });\n    this.deckExposed = [];\n    return this;\n  }\n\n  reset() {}\n\n  getRandomCardFromDeck() {\n    while (this.cardsConsidered < 53) {\n      const ranksIdx = Math.floor(Math.random() * 13);\n      const typeIdx = Math.floor(Math.random() * 4);\n      const index = `${ranksIdx}-${typeIdx}`;\n      if (!this.cardConsidered[index]) {\n        this.cardConsidered[index] = true;\n        this.cardsConsidered++;\n        return {\n          type: this.type[typeIdx],\n          rank: this.ranks[ranksIdx],\n          id: Math.random(),\n        };\n      }\n    }\n    return false;\n  }\n}\n","import React from \"react\";\nimport { Deck } from \"../deck/deck\";\nimport { Solitare } from \"../solitare\";\nimport \"./gameboard.css\";\nexport class Gameboard extends React.Component {\n  constructor(props) {\n    super(props);\n    const solitare = new Solitare();\n    solitare.initialize();\n    this.state = {\n      solitare,\n      selectedDeckInfo: { deck: null, type: -1, index: -1, top: -1, left: -1 },\n    };\n    this.gameboardRef = React.createRef();\n    this.deckInHandRef = React.createRef();\n  }\n\n  componentDidUpdate(prev) {\n    if (prev.reset !== this.props.reset) {\n      this.setState({ solitare: new Solitare().initialize() });\n    }\n  }\n\n  deckClicked(cards, index, type, e, deckIndex) {\n    // //console.log(cards, index, type);\n    if (type === \"DECK\" && !this.state.selectedDeckInfo?.deck) {\n      this.setState({ solitare: this.state.solitare.deckToDeckExpose() });\n    } else if (!this.state.selectedDeckInfo?.deck) {\n      //hold deck in hand\n      if (cards[0].hidden) return;\n      if (type === \"DECK_EXPOSED\") {\n        this.setState({\n          selectedDeckInfo: { deck: cards, index, type, e, deckIndex },\n          solitare: this.state.solitare.removeCardsFromDeck(),\n        });\n      } else {\n        this.setState({\n          selectedDeckInfo: { deck: cards, index, type, e, deckIndex },\n          solitare: this.state.solitare.removeOldCardsFromBoard(\n            deckIndex,\n            index\n          ),\n        });\n      }\n    } else {\n      // target deck\n      if (type === \"BOARD\") {\n        //console.log(deckIndex);\n        const oldDeck = { ...this.state.selectedDeckInfo };\n        const solitare = this.state.solitare.appendNewCardsToBoard(\n          deckIndex,\n          oldDeck.deck,\n          oldDeck.deckIndex === deckIndex\n        );\n        if (!solitare) return;\n        this.setState({\n          solitare: solitare.exposeTopDeck(oldDeck.deckIndex),\n          selectedDeckInfo: {},\n        });\n      }\n    }\n  }\n\n  onDeckClick() {\n    if (\n      this.state.selectedDeckInfo?.deck &&\n      this.state.selectedDeckInfo?.type === \"DECK_EXPOSED\"\n    ) {\n      this.setState({\n        solitare: this.state.solitare.deckToDeckExpose(\n          this.state.selectedDeckInfo?.deck[0]\n        ),\n        selectedDeckInfo: {},\n      });\n    }\n  }\n\n  onEmptyDeckBoard(index) {\n    if (this.state.selectedDeckInfo?.deck) {\n      const oldDeck = { ...this.state.selectedDeckInfo };\n      const solitare = this.state.solitare.appendNewCardsToBoard(\n        index,\n        oldDeck.deck,\n        oldDeck.deckIndex === index\n      );\n      if (!solitare) return;\n      this.setState({\n        solitare: solitare.exposeTopDeck(oldDeck.deckIndex),\n        selectedDeckInfo: {},\n      });\n    }\n  }\n\n  deckTarget(...args) {\n    //console.log(\"TARGET-\", args);\n    //console.log(\"DECK-\", this.state.selectedDeckInfo);\n  }\n\n  componentDidMount() {\n    this.gameboardRef.current.addEventListener(\"mousemove\", (e) => {\n      if (this.state.selectedDeckInfo.deck) {\n        this.deckInHandRef.current.style.top = `${e.clientY}px`;\n        this.deckInHandRef.current.style.left = `${e.clientX + 10}px`;\n      }\n    });\n  }\n\n  resetDeck() {\n    if (this.state.solitare.deck.length === 0)\n      this.setState({ solitare: this.state.solitare.resetDeck() });\n  }\n\n  lastDeckClicked(cards, index, type, e, deckIndex) {\n    if (this.state.selectedDeckInfo?.deck?.length === 1) {\n      const oldDeck = { ...this.state.selectedDeckInfo };\n      const solitare = this.state.solitare.appendToFinishedDeck(\n        oldDeck.deck[oldDeck.deck.length - 1],\n        deckIndex\n      );\n      if (!solitare) return;\n      this.setState({\n        solitare: solitare.exposeTopDeck(oldDeck.deckIndex),\n        selectedDeckInfo: {},\n      });\n    }\n  }\n\n  render() {\n    const board = this.state.solitare.board.map((deck, deckIndex) => {\n      return (\n        <div\n          className=\"board-area\"\n          key={deck.id}\n          onClick={() => {\n            if (deck.length === 0) {\n              this.onEmptyDeckBoard(deckIndex);\n            }\n          }}>\n          <Deck\n            data={deck}\n            deckIndex={deckIndex}\n            deckClicked={this.deckClicked.bind(this)}\n            type=\"BOARD\"\n          />\n        </div>\n      );\n    });\n    const finishedDeck = this.state.solitare.finishedDeck.map(\n      (deck, deckIdx) => {\n        return (\n          <div className=\"ace\" key={deckIdx}>\n            {deck.length > 0 ? (\n              <Deck\n                key={deckIdx}\n                data={deck}\n                deckClicked={this.lastDeckClicked.bind(this)}\n                zIndex={1.5}\n                type=\"DECK_FINISHED\"\n                deckIndex={deckIdx}\n              />\n            ) : (\n              <p\n                onClick={() =>\n                  this.lastDeckClicked(null, null, null, null, deckIdx)\n                }>\n                Ace\n              </p>\n            )}\n          </div>\n        );\n      }\n    );\n    return (\n      <div className=\"game-board\" data={1} ref={this.gameboardRef}>\n        {this.state.selectedDeckInfo.deck && (\n          <div className=\"deck-in-hand\" ref={this.deckInHandRef}>\n            <Deck\n              data={this.state.selectedDeckInfo.deck}\n              deckClicked={this.deckTarget.bind(this)}\n            />\n          </div>\n        )}\n        <div className=\"game-board_header\">\n          <div className=\"deck-stash\">\n            <div className=\"decks\">\n              {this.state.solitare.deck.length > 0 ? (\n                <Deck\n                  data={this.state.solitare.deck}\n                  deckClicked={this.deckClicked.bind(this)}\n                  zIndex={1.5}\n                  type=\"DECK\"\n                />\n              ) : (\n                <p onClick={this.resetDeck.bind(this)}>Reset Deck</p>\n              )}\n            </div>\n            <div\n              className=\"decks-exposed\"\n              onClick={this.onDeckClick.bind(this)}>\n              <Deck\n                data={this.state.solitare.deckExposed}\n                deckClicked={this.deckClicked.bind(this)}\n                zIndex={1.5}\n                type=\"DECK_EXPOSED\"\n              />\n            </div>\n          </div>\n          <div className=\"aces\">{finishedDeck}</div>\n        </div>\n        <div className=\"game-board_play\">{board}</div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { Gameboard } from \"./gameboard/gameboard\";\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { reset: 0 };\n  }\n\n  render() {\n    return (\n      <>\n        <div className=\"solitare-header\">\n          <div>\n            <h1>Solitare</h1>\n            <button onClick={() => this.setState({ reset: Math.random() })}>\n              Reset\n            </button>\n          </div>\n          {/* <div className=\"solitare-score\">score</div> */}\n        </div>\n        <Gameboard reset={this.state.reset} />\n      </>\n    );\n  }\n}\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}